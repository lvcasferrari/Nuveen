{"dependencies":[{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"requestNotificationPermissions\", {\n    enumerable: true,\n    get: function () {\n      return requestNotificationPermissions;\n    }\n  });\n  Object.defineProperty(exports, \"scheduleAlarmNotification\", {\n    enumerable: true,\n    get: function () {\n      return scheduleAlarmNotification;\n    }\n  });\n  Object.defineProperty(exports, \"cancelAlarmNotification\", {\n    enumerable: true,\n    get: function () {\n      return cancelAlarmNotification;\n    }\n  });\n  Object.defineProperty(exports, \"cancelAllAlarmNotifications\", {\n    enumerable: true,\n    get: function () {\n      return cancelAllAlarmNotifications;\n    }\n  });\n  var _expoNotifications = require(_dependencyMap[0], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  // Configure notification handler (only for development builds, not Expo Go)\n  try {\n    Notifications.setNotificationHandler({\n      handleNotification: async () => ({\n        shouldShowAlert: true,\n        shouldPlaySound: true,\n        shouldSetBadge: false\n      })\n    });\n  } catch (error) {\n    console.log('Notification handler setup skipped (Expo Go limitation)');\n  }\n  const requestNotificationPermissions = async () => {\n    try {\n      const {\n        status: existingStatus\n      } = await Notifications.getPermissionsAsync();\n      let finalStatus = existingStatus;\n      if (existingStatus !== 'granted') {\n        const {\n          status\n        } = await Notifications.requestPermissionsAsync();\n        finalStatus = status;\n      }\n      return finalStatus === 'granted';\n    } catch (error) {\n      console.error('Error requesting notification permissions:', error);\n      return false;\n    }\n  };\n  const scheduleAlarmNotification = async alarm => {\n    try {\n      // Cancel existing notifications for this alarm\n      await cancelAlarmNotification(alarm.id);\n      if (!alarm.enabled) {\n        return null;\n      }\n      const [hours, minutes] = alarm.time.split(':').map(Number);\n      const now = new Date();\n      const scheduledTime = new Date();\n      scheduledTime.setHours(hours, minutes, 0, 0);\n\n      // If the time has passed today, schedule for tomorrow\n      if (scheduledTime <= now) {\n        scheduledTime.setDate(scheduledTime.getDate() + 1);\n      }\n      const trigger = {\n        hour: hours,\n        minute: minutes,\n        repeats: alarm.repeatDays.length > 0\n      };\n\n      // Configure notification for maximum visibility and persistence\n      const notificationId = await Notifications.scheduleNotificationAsync({\n        content: {\n          title: alarm.name || 'Nuveen Alarm',\n          body: 'Scan your NFC tag to stop the alarm',\n          sound: 'default',\n          // Critical: play sound even in background\n          priority: Notifications.AndroidNotificationPriority.MAX,\n          vibrate: [0, 250, 250, 250],\n          // Vibration pattern\n          sticky: true,\n          // Make notification persistent (Android)\n          autoDismiss: false,\n          // Don't auto-dismiss (Android)\n          categoryIdentifier: 'alarm',\n          // Custom category for iOS\n          data: {\n            alarmId: alarm.id,\n            requiresNFC: alarm.nfcRequired,\n            alarmName: alarm.name,\n            alarmTime: alarm.time,\n            customSoundUri: alarm.customSoundUri // Áudio personalizado\n          }\n        },\n        trigger: trigger\n      });\n      console.log(`✅ Alarm scheduled: ${alarm.name} at ${alarm.time} (ID: ${notificationId})`);\n      return notificationId;\n    } catch (error) {\n      console.error('❌ Error scheduling alarm notification:', error);\n      return null;\n    }\n  };\n  const cancelAlarmNotification = async alarmId => {\n    try {\n      const scheduled = await Notifications.getAllScheduledNotificationsAsync();\n      const alarmsToCancel = scheduled.filter(n => n.content.data?.alarmId === alarmId);\n      for (const notification of alarmsToCancel) {\n        await Notifications.cancelScheduledNotificationAsync(notification.identifier);\n      }\n    } catch (error) {\n      console.error('Error canceling alarm notification:', error);\n    }\n  };\n  const cancelAllAlarmNotifications = async () => {\n    try {\n      await Notifications.cancelAllScheduledNotificationsAsync();\n    } catch (error) {\n      console.error('Error canceling all notifications:', error);\n    }\n  };\n});","lineCount":151,"map":[[22,2,18,0,"Object"],[22,8,18,0],[22,9,18,0,"defineProperty"],[22,23,18,0],[22,24,18,0,"exports"],[22,31,18,0],[23,4,18,0,"enumerable"],[23,14,18,0],[24,4,18,0,"get"],[24,7,18,0],[24,18,18,0,"get"],[24,19,18,0],[25,6,18,0],[25,13,18,0,"requestNotificationPermissions"],[25,43,18,0],[26,4,18,0],[27,2,18,0],[28,2,35,0,"Object"],[28,8,35,0],[28,9,35,0,"defineProperty"],[28,23,35,0],[28,24,35,0,"exports"],[28,31,35,0],[29,4,35,0,"enumerable"],[29,14,35,0],[30,4,35,0,"get"],[30,7,35,0],[30,18,35,0,"get"],[30,19,35,0],[31,6,35,0],[31,13,35,0,"scheduleAlarmNotification"],[31,38,35,0],[32,4,35,0],[33,2,35,0],[34,2,90,0,"Object"],[34,8,90,0],[34,9,90,0,"defineProperty"],[34,23,90,0],[34,24,90,0,"exports"],[34,31,90,0],[35,4,90,0,"enumerable"],[35,14,90,0],[36,4,90,0,"get"],[36,7,90,0],[36,18,90,0,"get"],[36,19,90,0],[37,6,90,0],[37,13,90,0,"cancelAlarmNotification"],[37,36,90,0],[38,4,90,0],[39,2,90,0],[40,2,105,0,"Object"],[40,8,105,0],[40,9,105,0,"defineProperty"],[40,23,105,0],[40,24,105,0,"exports"],[40,31,105,0],[41,4,105,0,"enumerable"],[41,14,105,0],[42,4,105,0,"get"],[42,7,105,0],[42,18,105,0,"get"],[42,19,105,0],[43,6,105,0],[43,13,105,0,"cancelAllAlarmNotifications"],[43,40,105,0],[44,4,105,0],[45,2,105,0],[46,2,1,0],[46,6,1,0,"_expoNotifications"],[46,24,1,0],[46,27,1,0,"require"],[46,34,1,0],[46,35,1,0,"_dependencyMap"],[46,49,1,0],[47,2,1,0],[47,6,1,0,"Notifications"],[47,19,1,0],[47,22,1,0,"_interopNamespace"],[47,39,1,0],[47,40,1,0,"_expoNotifications"],[47,58,1,0],[48,2,5,0],[49,2,6,0],[49,6,6,4],[50,4,7,2,"Notifications"],[50,17,7,15],[50,18,7,16,"setNotificationHandler"],[50,40,7,38],[50,41,7,39],[51,6,8,4,"handleNotification"],[51,24,8,22],[51,26,8,24],[51,32,8,24,"handleNotification"],[51,33,8,24],[51,39,8,37],[52,8,9,6,"shouldShowAlert"],[52,23,9,21],[52,25,9,23],[52,29,9,27],[53,8,10,6,"shouldPlaySound"],[53,23,10,21],[53,25,10,23],[53,29,10,27],[54,8,11,6,"shouldSetBadge"],[54,22,11,20],[54,24,11,22],[55,6,12,4],[55,7,12,5],[56,4,13,2],[56,5,13,3],[56,6,13,4],[57,2,14,0],[57,3,14,1],[57,4,14,2],[57,11,14,9,"error"],[57,16,14,14],[57,18,14,16],[58,4,15,2,"console"],[58,11,15,9],[58,12,15,10,"log"],[58,15,15,13],[58,16,15,14],[58,73,15,71],[58,74,15,72],[59,2,16,0],[60,2,18,7],[60,8,18,13,"requestNotificationPermissions"],[60,38,18,43],[60,41,18,46],[60,47,18,46,"requestNotificationPermissions"],[60,48,18,46],[60,53,18,76],[61,4,19,2],[61,8,19,6],[62,6,20,4],[62,12,20,10],[63,8,20,12,"status"],[63,14,20,18],[63,16,20,20,"existingStatus"],[64,6,20,35],[64,7,20,36],[64,10,20,39],[64,16,20,45,"Notifications"],[64,29,20,58],[64,30,20,59,"getPermissionsAsync"],[64,49,20,78],[64,50,20,79],[64,51,20,80],[65,6,21,4],[65,10,21,8,"finalStatus"],[65,21,21,19],[65,24,21,22,"existingStatus"],[65,38,21,36],[66,6,23,4],[66,10,23,8,"existingStatus"],[66,24,23,22],[66,29,23,27],[66,38,23,36],[66,40,23,38],[67,8,24,6],[67,14,24,12],[68,10,24,14,"status"],[69,8,24,21],[69,9,24,22],[69,12,24,25],[69,18,24,31,"Notifications"],[69,31,24,44],[69,32,24,45,"requestPermissionsAsync"],[69,55,24,68],[69,56,24,69],[69,57,24,70],[70,8,25,6,"finalStatus"],[70,19,25,17],[70,22,25,20,"status"],[70,28,25,26],[71,6,26,4],[72,6,28,4],[72,13,28,11,"finalStatus"],[72,24,28,22],[72,29,28,27],[72,38,28,36],[73,4,29,2],[73,5,29,3],[73,6,29,4],[73,13,29,11,"error"],[73,18,29,16],[73,20,29,18],[74,6,30,4,"console"],[74,13,30,11],[74,14,30,12,"error"],[74,19,30,17],[74,20,30,18],[74,64,30,62],[74,66,30,64,"error"],[74,71,30,69],[74,72,30,70],[75,6,31,4],[75,13,31,11],[75,18,31,16],[76,4,32,2],[77,2,33,0],[77,3,33,1],[78,2,35,7],[78,8,35,13,"scheduleAlarmNotification"],[78,33,35,38],[78,36,35,41],[78,42,35,48,"alarm"],[78,47,35,60],[78,51,35,89],[79,4,36,2],[79,8,36,6],[80,6,37,4],[81,6,38,4],[81,12,38,10,"cancelAlarmNotification"],[81,35,38,33],[81,36,38,34,"alarm"],[81,41,38,39],[81,42,38,40,"id"],[81,44,38,42],[81,45,38,43],[82,6,40,4],[82,10,40,8],[82,11,40,9,"alarm"],[82,16,40,14],[82,17,40,15,"enabled"],[82,24,40,22],[82,26,40,24],[83,8,41,6],[83,15,41,13],[83,19,41,17],[84,6,42,4],[85,6,44,4],[85,12,44,10],[85,13,44,11,"hours"],[85,18,44,16],[85,20,44,18,"minutes"],[85,27,44,25],[85,28,44,26],[85,31,44,29,"alarm"],[85,36,44,34],[85,37,44,35,"time"],[85,41,44,39],[85,42,44,40,"split"],[85,47,44,45],[85,48,44,46],[85,51,44,49],[85,52,44,50],[85,53,44,51,"map"],[85,56,44,54],[85,57,44,55,"Number"],[85,63,44,61],[85,64,44,62],[86,6,45,4],[86,12,45,10,"now"],[86,15,45,13],[86,18,45,16],[86,22,45,20,"Date"],[86,26,45,24],[86,27,45,25],[86,28,45,26],[87,6,46,4],[87,12,46,10,"scheduledTime"],[87,25,46,23],[87,28,46,26],[87,32,46,30,"Date"],[87,36,46,34],[87,37,46,35],[87,38,46,36],[88,6,47,4,"scheduledTime"],[88,19,47,17],[88,20,47,18,"setHours"],[88,28,47,26],[88,29,47,27,"hours"],[88,34,47,32],[88,36,47,34,"minutes"],[88,43,47,41],[88,45,47,43],[88,46,47,44],[88,48,47,46],[88,49,47,47],[88,50,47,48],[90,6,49,4],[91,6,50,4],[91,10,50,8,"scheduledTime"],[91,23,50,21],[91,27,50,25,"now"],[91,30,50,28],[91,32,50,30],[92,8,51,6,"scheduledTime"],[92,21,51,19],[92,22,51,20,"setDate"],[92,29,51,27],[92,30,51,28,"scheduledTime"],[92,43,51,41],[92,44,51,42,"getDate"],[92,51,51,49],[92,52,51,50],[92,53,51,51],[92,56,51,54],[92,57,51,55],[92,58,51,56],[93,6,52,4],[94,6,54,4],[94,12,54,10,"trigger"],[94,19,54,17],[94,22,54,20],[95,8,55,6,"hour"],[95,12,55,10],[95,14,55,12,"hours"],[95,19,55,17],[96,8,56,6,"minute"],[96,14,56,12],[96,16,56,14,"minutes"],[96,23,56,21],[97,8,57,6,"repeats"],[97,15,57,13],[97,17,57,15,"alarm"],[97,22,57,20],[97,23,57,21,"repeatDays"],[97,33,57,31],[97,34,57,32,"length"],[97,40,57,38],[97,43,57,41],[98,6,58,4],[98,7,58,5],[100,6,60,4],[101,6,61,4],[101,12,61,10,"notificationId"],[101,26,61,24],[101,29,61,27],[101,35,61,33,"Notifications"],[101,48,61,46],[101,49,61,47,"scheduleNotificationAsync"],[101,74,61,72],[101,75,61,73],[102,8,62,6,"content"],[102,15,62,13],[102,17,62,15],[103,10,63,8,"title"],[103,15,63,13],[103,17,63,15,"alarm"],[103,22,63,20],[103,23,63,21,"name"],[103,27,63,25],[103,31,63,29],[103,45,63,43],[104,10,64,8,"body"],[104,14,64,12],[104,16,64,14],[104,53,64,51],[105,10,65,8,"sound"],[105,15,65,13],[105,17,65,15],[105,26,65,24],[106,10,65,26],[107,10,66,8,"priority"],[107,18,66,16],[107,20,66,18,"Notifications"],[107,33,66,31],[107,34,66,32,"AndroidNotificationPriority"],[107,61,66,59],[107,62,66,60,"MAX"],[107,65,66,63],[108,10,67,8,"vibrate"],[108,17,67,15],[108,19,67,17],[108,20,67,18],[108,21,67,19],[108,23,67,21],[108,26,67,24],[108,28,67,26],[108,31,67,29],[108,33,67,31],[108,36,67,34],[108,37,67,35],[109,10,67,37],[110,10,68,8,"sticky"],[110,16,68,14],[110,18,68,16],[110,22,68,20],[111,10,68,22],[112,10,69,8,"autoDismiss"],[112,21,69,19],[112,23,69,21],[112,28,69,26],[113,10,69,28],[114,10,70,8,"categoryIdentifier"],[114,28,70,26],[114,30,70,28],[114,37,70,35],[115,10,70,37],[116,10,71,8,"data"],[116,14,71,12],[116,16,71,14],[117,12,72,10,"alarmId"],[117,19,72,17],[117,21,72,19,"alarm"],[117,26,72,24],[117,27,72,25,"id"],[117,29,72,27],[118,12,73,10,"requiresNFC"],[118,23,73,21],[118,25,73,23,"alarm"],[118,30,73,28],[118,31,73,29,"nfcRequired"],[118,42,73,40],[119,12,74,10,"alarmName"],[119,21,74,19],[119,23,74,21,"alarm"],[119,28,74,26],[119,29,74,27,"name"],[119,33,74,31],[120,12,75,10,"alarmTime"],[120,21,75,19],[120,23,75,21,"alarm"],[120,28,75,26],[120,29,75,27,"time"],[120,33,75,31],[121,12,76,10,"customSoundUri"],[121,26,76,24],[121,28,76,26,"alarm"],[121,33,76,31],[121,34,76,32,"customSoundUri"],[121,48,76,46],[121,49,76,48],[122,10,77,8],[123,8,78,6],[123,9,78,7],[124,8,79,6,"trigger"],[124,15,79,13],[124,17,79,15,"trigger"],[125,6,80,4],[125,7,80,5],[125,8,80,6],[126,6,82,4,"console"],[126,13,82,11],[126,14,82,12,"log"],[126,17,82,15],[126,18,82,16],[126,40,82,38,"alarm"],[126,45,82,43],[126,46,82,44,"name"],[126,50,82,48],[126,57,82,55,"alarm"],[126,62,82,60],[126,63,82,61,"time"],[126,67,82,65],[126,76,82,74,"notificationId"],[126,90,82,88],[126,93,82,91],[126,94,82,92],[127,6,83,4],[127,13,83,11,"notificationId"],[127,27,83,25],[128,4,84,2],[128,5,84,3],[128,6,84,4],[128,13,84,11,"error"],[128,18,84,16],[128,20,84,18],[129,6,85,4,"console"],[129,13,85,11],[129,14,85,12,"error"],[129,19,85,17],[129,20,85,18],[129,60,85,58],[129,62,85,60,"error"],[129,67,85,65],[129,68,85,66],[130,6,86,4],[130,13,86,11],[130,17,86,15],[131,4,87,2],[132,2,88,0],[132,3,88,1],[133,2,90,7],[133,8,90,13,"cancelAlarmNotification"],[133,31,90,36],[133,34,90,39],[133,40,90,46,"alarmId"],[133,47,90,61],[133,51,90,81],[134,4,91,2],[134,8,91,6],[135,6,92,4],[135,12,92,10,"scheduled"],[135,21,92,19],[135,24,92,22],[135,30,92,28,"Notifications"],[135,43,92,41],[135,44,92,42,"getAllScheduledNotificationsAsync"],[135,77,92,75],[135,78,92,76],[135,79,92,77],[136,6,93,4],[136,12,93,10,"alarmsToCancel"],[136,26,93,24],[136,29,93,27,"scheduled"],[136,38,93,36],[136,39,93,37,"filter"],[136,45,93,43],[136,46,94,6,"n"],[136,47,94,7],[136,51,94,11,"n"],[136,52,94,12],[136,53,94,13,"content"],[136,60,94,20],[136,61,94,21,"data"],[136,65,94,25],[136,67,94,27,"alarmId"],[136,74,94,34],[136,79,94,39,"alarmId"],[136,86,95,4],[136,87,95,5],[137,6,97,4],[137,11,97,9],[137,17,97,15,"notification"],[137,29,97,27],[137,33,97,31,"alarmsToCancel"],[137,47,97,45],[137,49,97,47],[138,8,98,6],[138,14,98,12,"Notifications"],[138,27,98,25],[138,28,98,26,"cancelScheduledNotificationAsync"],[138,60,98,58],[138,61,98,59,"notification"],[138,73,98,71],[138,74,98,72,"identifier"],[138,84,98,82],[138,85,98,83],[139,6,99,4],[140,4,100,2],[140,5,100,3],[140,6,100,4],[140,13,100,11,"error"],[140,18,100,16],[140,20,100,18],[141,6,101,4,"console"],[141,13,101,11],[141,14,101,12,"error"],[141,19,101,17],[141,20,101,18],[141,57,101,55],[141,59,101,57,"error"],[141,64,101,62],[141,65,101,63],[142,4,102,2],[143,2,103,0],[143,3,103,1],[144,2,105,7],[144,8,105,13,"cancelAllAlarmNotifications"],[144,35,105,40],[144,38,105,43],[144,44,105,43,"cancelAllAlarmNotifications"],[144,45,105,43],[144,50,105,70],[145,4,106,2],[145,8,106,6],[146,6,107,4],[146,12,107,10,"Notifications"],[146,25,107,23],[146,26,107,24,"cancelAllScheduledNotificationsAsync"],[146,62,107,60],[146,63,107,61],[146,64,107,62],[147,4,108,2],[147,5,108,3],[147,6,108,4],[147,13,108,11,"error"],[147,18,108,16],[147,20,108,18],[148,6,109,4,"console"],[148,13,109,11],[148,14,109,12,"error"],[148,19,109,17],[148,20,109,18],[148,56,109,54],[148,58,109,56,"error"],[148,63,109,61],[148,64,109,62],[149,4,110,2],[150,2,111,0],[150,3,111,1],[151,0,111,2],[151,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","requestNotificationPermissions","scheduleAlarmNotification","cancelAlarmNotification","scheduled.filter$argument_0","cancelAllAlarmNotifications"],"mappings":"AAA;wBCO;MDI;8CEM;CFe;yCGE;CHqD;uCIE;MCI,wCD;CJS;2CME;CNM"},"hasCjsExports":false},"type":"js/module"}]}
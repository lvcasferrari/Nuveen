{"dependencies":[{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"requestNotificationPermissions\", {\n    enumerable: true,\n    get: function () {\n      return requestNotificationPermissions;\n    }\n  });\n  Object.defineProperty(exports, \"scheduleAlarmNotification\", {\n    enumerable: true,\n    get: function () {\n      return scheduleAlarmNotification;\n    }\n  });\n  Object.defineProperty(exports, \"cancelAlarmNotification\", {\n    enumerable: true,\n    get: function () {\n      return cancelAlarmNotification;\n    }\n  });\n  Object.defineProperty(exports, \"cancelAllAlarmNotifications\", {\n    enumerable: true,\n    get: function () {\n      return cancelAllAlarmNotifications;\n    }\n  });\n  var _expoNotifications = require(_dependencyMap[0], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  // Configure notification handler (only for development builds, not Expo Go)\n  try {\n    Notifications.setNotificationHandler({\n      handleNotification: async () => ({\n        shouldShowAlert: true,\n        shouldPlaySound: true,\n        shouldSetBadge: false\n      })\n    });\n  } catch (error) {\n    console.log('Notification handler setup skipped (Expo Go limitation)');\n  }\n  const requestNotificationPermissions = async () => {\n    try {\n      const {\n        status: existingStatus\n      } = await Notifications.getPermissionsAsync();\n      let finalStatus = existingStatus;\n      if (existingStatus !== 'granted') {\n        const {\n          status\n        } = await Notifications.requestPermissionsAsync();\n        finalStatus = status;\n      }\n      return finalStatus === 'granted';\n    } catch (error) {\n      console.error('Error requesting notification permissions:', error);\n      return false;\n    }\n  };\n  const scheduleAlarmNotification = async alarm => {\n    try {\n      // Cancel existing notifications for this alarm\n      await cancelAlarmNotification(alarm.id);\n      if (!alarm.enabled) {\n        return null;\n      }\n      const [hours, minutes] = alarm.time.split(':').map(Number);\n      const now = new Date();\n      const scheduledTime = new Date();\n      scheduledTime.setHours(hours, minutes, 0, 0);\n\n      // If the time has passed today, schedule for tomorrow\n      if (scheduledTime <= now) {\n        scheduledTime.setDate(scheduledTime.getDate() + 1);\n      }\n      const trigger = {\n        hour: hours,\n        minute: minutes,\n        repeats: alarm.repeatDays.length > 0\n      };\n      const notificationId = await Notifications.scheduleNotificationAsync({\n        content: {\n          title: alarm.name || 'Nuveen Alarm',\n          body: 'Scan your NFC tag to stop the alarm',\n          sound: 'default',\n          priority: Notifications.AndroidNotificationPriority.MAX,\n          data: {\n            alarmId: alarm.id,\n            requiresNFC: alarm.nfcRequired\n          }\n        },\n        trigger: trigger\n      });\n      return notificationId;\n    } catch (error) {\n      console.error('Error scheduling alarm notification:', error);\n      return null;\n    }\n  };\n  const cancelAlarmNotification = async alarmId => {\n    try {\n      const scheduled = await Notifications.getAllScheduledNotificationsAsync();\n      const alarmsToCancel = scheduled.filter(n => n.content.data?.alarmId === alarmId);\n      for (const notification of alarmsToCancel) {\n        await Notifications.cancelScheduledNotificationAsync(notification.identifier);\n      }\n    } catch (error) {\n      console.error('Error canceling alarm notification:', error);\n    }\n  };\n  const cancelAllAlarmNotifications = async () => {\n    try {\n      await Notifications.cancelAllScheduledNotificationsAsync();\n    } catch (error) {\n      console.error('Error canceling all notifications:', error);\n    }\n  };\n});","lineCount":136,"map":[[22,2,18,0,"Object"],[22,8,18,0],[22,9,18,0,"defineProperty"],[22,23,18,0],[22,24,18,0,"exports"],[22,31,18,0],[23,4,18,0,"enumerable"],[23,14,18,0],[24,4,18,0,"get"],[24,7,18,0],[24,18,18,0,"get"],[24,19,18,0],[25,6,18,0],[25,13,18,0,"requestNotificationPermissions"],[25,43,18,0],[26,4,18,0],[27,2,18,0],[28,2,35,0,"Object"],[28,8,35,0],[28,9,35,0,"defineProperty"],[28,23,35,0],[28,24,35,0,"exports"],[28,31,35,0],[29,4,35,0,"enumerable"],[29,14,35,0],[30,4,35,0,"get"],[30,7,35,0],[30,18,35,0,"get"],[30,19,35,0],[31,6,35,0],[31,13,35,0,"scheduleAlarmNotification"],[31,38,35,0],[32,4,35,0],[33,2,35,0],[34,2,81,0,"Object"],[34,8,81,0],[34,9,81,0,"defineProperty"],[34,23,81,0],[34,24,81,0,"exports"],[34,31,81,0],[35,4,81,0,"enumerable"],[35,14,81,0],[36,4,81,0,"get"],[36,7,81,0],[36,18,81,0,"get"],[36,19,81,0],[37,6,81,0],[37,13,81,0,"cancelAlarmNotification"],[37,36,81,0],[38,4,81,0],[39,2,81,0],[40,2,96,0,"Object"],[40,8,96,0],[40,9,96,0,"defineProperty"],[40,23,96,0],[40,24,96,0,"exports"],[40,31,96,0],[41,4,96,0,"enumerable"],[41,14,96,0],[42,4,96,0,"get"],[42,7,96,0],[42,18,96,0,"get"],[42,19,96,0],[43,6,96,0],[43,13,96,0,"cancelAllAlarmNotifications"],[43,40,96,0],[44,4,96,0],[45,2,96,0],[46,2,1,0],[46,6,1,0,"_expoNotifications"],[46,24,1,0],[46,27,1,0,"require"],[46,34,1,0],[46,35,1,0,"_dependencyMap"],[46,49,1,0],[47,2,1,0],[47,6,1,0,"Notifications"],[47,19,1,0],[47,22,1,0,"_interopNamespace"],[47,39,1,0],[47,40,1,0,"_expoNotifications"],[47,58,1,0],[48,2,5,0],[49,2,6,0],[49,6,6,4],[50,4,7,2,"Notifications"],[50,17,7,15],[50,18,7,16,"setNotificationHandler"],[50,40,7,38],[50,41,7,39],[51,6,8,4,"handleNotification"],[51,24,8,22],[51,26,8,24],[51,32,8,24,"handleNotification"],[51,33,8,24],[51,39,8,37],[52,8,9,6,"shouldShowAlert"],[52,23,9,21],[52,25,9,23],[52,29,9,27],[53,8,10,6,"shouldPlaySound"],[53,23,10,21],[53,25,10,23],[53,29,10,27],[54,8,11,6,"shouldSetBadge"],[54,22,11,20],[54,24,11,22],[55,6,12,4],[55,7,12,5],[56,4,13,2],[56,5,13,3],[56,6,13,4],[57,2,14,0],[57,3,14,1],[57,4,14,2],[57,11,14,9,"error"],[57,16,14,14],[57,18,14,16],[58,4,15,2,"console"],[58,11,15,9],[58,12,15,10,"log"],[58,15,15,13],[58,16,15,14],[58,73,15,71],[58,74,15,72],[59,2,16,0],[60,2,18,7],[60,8,18,13,"requestNotificationPermissions"],[60,38,18,43],[60,41,18,46],[60,47,18,46,"requestNotificationPermissions"],[60,48,18,46],[60,53,18,76],[61,4,19,2],[61,8,19,6],[62,6,20,4],[62,12,20,10],[63,8,20,12,"status"],[63,14,20,18],[63,16,20,20,"existingStatus"],[64,6,20,35],[64,7,20,36],[64,10,20,39],[64,16,20,45,"Notifications"],[64,29,20,58],[64,30,20,59,"getPermissionsAsync"],[64,49,20,78],[64,50,20,79],[64,51,20,80],[65,6,21,4],[65,10,21,8,"finalStatus"],[65,21,21,19],[65,24,21,22,"existingStatus"],[65,38,21,36],[66,6,23,4],[66,10,23,8,"existingStatus"],[66,24,23,22],[66,29,23,27],[66,38,23,36],[66,40,23,38],[67,8,24,6],[67,14,24,12],[68,10,24,14,"status"],[69,8,24,21],[69,9,24,22],[69,12,24,25],[69,18,24,31,"Notifications"],[69,31,24,44],[69,32,24,45,"requestPermissionsAsync"],[69,55,24,68],[69,56,24,69],[69,57,24,70],[70,8,25,6,"finalStatus"],[70,19,25,17],[70,22,25,20,"status"],[70,28,25,26],[71,6,26,4],[72,6,28,4],[72,13,28,11,"finalStatus"],[72,24,28,22],[72,29,28,27],[72,38,28,36],[73,4,29,2],[73,5,29,3],[73,6,29,4],[73,13,29,11,"error"],[73,18,29,16],[73,20,29,18],[74,6,30,4,"console"],[74,13,30,11],[74,14,30,12,"error"],[74,19,30,17],[74,20,30,18],[74,64,30,62],[74,66,30,64,"error"],[74,71,30,69],[74,72,30,70],[75,6,31,4],[75,13,31,11],[75,18,31,16],[76,4,32,2],[77,2,33,0],[77,3,33,1],[78,2,35,7],[78,8,35,13,"scheduleAlarmNotification"],[78,33,35,38],[78,36,35,41],[78,42,35,48,"alarm"],[78,47,35,60],[78,51,35,89],[79,4,36,2],[79,8,36,6],[80,6,37,4],[81,6,38,4],[81,12,38,10,"cancelAlarmNotification"],[81,35,38,33],[81,36,38,34,"alarm"],[81,41,38,39],[81,42,38,40,"id"],[81,44,38,42],[81,45,38,43],[82,6,40,4],[82,10,40,8],[82,11,40,9,"alarm"],[82,16,40,14],[82,17,40,15,"enabled"],[82,24,40,22],[82,26,40,24],[83,8,41,6],[83,15,41,13],[83,19,41,17],[84,6,42,4],[85,6,44,4],[85,12,44,10],[85,13,44,11,"hours"],[85,18,44,16],[85,20,44,18,"minutes"],[85,27,44,25],[85,28,44,26],[85,31,44,29,"alarm"],[85,36,44,34],[85,37,44,35,"time"],[85,41,44,39],[85,42,44,40,"split"],[85,47,44,45],[85,48,44,46],[85,51,44,49],[85,52,44,50],[85,53,44,51,"map"],[85,56,44,54],[85,57,44,55,"Number"],[85,63,44,61],[85,64,44,62],[86,6,45,4],[86,12,45,10,"now"],[86,15,45,13],[86,18,45,16],[86,22,45,20,"Date"],[86,26,45,24],[86,27,45,25],[86,28,45,26],[87,6,46,4],[87,12,46,10,"scheduledTime"],[87,25,46,23],[87,28,46,26],[87,32,46,30,"Date"],[87,36,46,34],[87,37,46,35],[87,38,46,36],[88,6,47,4,"scheduledTime"],[88,19,47,17],[88,20,47,18,"setHours"],[88,28,47,26],[88,29,47,27,"hours"],[88,34,47,32],[88,36,47,34,"minutes"],[88,43,47,41],[88,45,47,43],[88,46,47,44],[88,48,47,46],[88,49,47,47],[88,50,47,48],[90,6,49,4],[91,6,50,4],[91,10,50,8,"scheduledTime"],[91,23,50,21],[91,27,50,25,"now"],[91,30,50,28],[91,32,50,30],[92,8,51,6,"scheduledTime"],[92,21,51,19],[92,22,51,20,"setDate"],[92,29,51,27],[92,30,51,28,"scheduledTime"],[92,43,51,41],[92,44,51,42,"getDate"],[92,51,51,49],[92,52,51,50],[92,53,51,51],[92,56,51,54],[92,57,51,55],[92,58,51,56],[93,6,52,4],[94,6,54,4],[94,12,54,10,"trigger"],[94,19,54,17],[94,22,54,20],[95,8,55,6,"hour"],[95,12,55,10],[95,14,55,12,"hours"],[95,19,55,17],[96,8,56,6,"minute"],[96,14,56,12],[96,16,56,14,"minutes"],[96,23,56,21],[97,8,57,6,"repeats"],[97,15,57,13],[97,17,57,15,"alarm"],[97,22,57,20],[97,23,57,21,"repeatDays"],[97,33,57,31],[97,34,57,32,"length"],[97,40,57,38],[97,43,57,41],[98,6,58,4],[98,7,58,5],[99,6,60,4],[99,12,60,10,"notificationId"],[99,26,60,24],[99,29,60,27],[99,35,60,33,"Notifications"],[99,48,60,46],[99,49,60,47,"scheduleNotificationAsync"],[99,74,60,72],[99,75,60,73],[100,8,61,6,"content"],[100,15,61,13],[100,17,61,15],[101,10,62,8,"title"],[101,15,62,13],[101,17,62,15,"alarm"],[101,22,62,20],[101,23,62,21,"name"],[101,27,62,25],[101,31,62,29],[101,45,62,43],[102,10,63,8,"body"],[102,14,63,12],[102,16,63,14],[102,53,63,51],[103,10,64,8,"sound"],[103,15,64,13],[103,17,64,15],[103,26,64,24],[104,10,65,8,"priority"],[104,18,65,16],[104,20,65,18,"Notifications"],[104,33,65,31],[104,34,65,32,"AndroidNotificationPriority"],[104,61,65,59],[104,62,65,60,"MAX"],[104,65,65,63],[105,10,66,8,"data"],[105,14,66,12],[105,16,66,14],[106,12,67,10,"alarmId"],[106,19,67,17],[106,21,67,19,"alarm"],[106,26,67,24],[106,27,67,25,"id"],[106,29,67,27],[107,12,68,10,"requiresNFC"],[107,23,68,21],[107,25,68,23,"alarm"],[107,30,68,28],[107,31,68,29,"nfcRequired"],[108,10,69,8],[109,8,70,6],[109,9,70,7],[110,8,71,6,"trigger"],[110,15,71,13],[110,17,71,15,"trigger"],[111,6,72,4],[111,7,72,5],[111,8,72,6],[112,6,74,4],[112,13,74,11,"notificationId"],[112,27,74,25],[113,4,75,2],[113,5,75,3],[113,6,75,4],[113,13,75,11,"error"],[113,18,75,16],[113,20,75,18],[114,6,76,4,"console"],[114,13,76,11],[114,14,76,12,"error"],[114,19,76,17],[114,20,76,18],[114,58,76,56],[114,60,76,58,"error"],[114,65,76,63],[114,66,76,64],[115,6,77,4],[115,13,77,11],[115,17,77,15],[116,4,78,2],[117,2,79,0],[117,3,79,1],[118,2,81,7],[118,8,81,13,"cancelAlarmNotification"],[118,31,81,36],[118,34,81,39],[118,40,81,46,"alarmId"],[118,47,81,61],[118,51,81,81],[119,4,82,2],[119,8,82,6],[120,6,83,4],[120,12,83,10,"scheduled"],[120,21,83,19],[120,24,83,22],[120,30,83,28,"Notifications"],[120,43,83,41],[120,44,83,42,"getAllScheduledNotificationsAsync"],[120,77,83,75],[120,78,83,76],[120,79,83,77],[121,6,84,4],[121,12,84,10,"alarmsToCancel"],[121,26,84,24],[121,29,84,27,"scheduled"],[121,38,84,36],[121,39,84,37,"filter"],[121,45,84,43],[121,46,85,6,"n"],[121,47,85,7],[121,51,85,11,"n"],[121,52,85,12],[121,53,85,13,"content"],[121,60,85,20],[121,61,85,21,"data"],[121,65,85,25],[121,67,85,27,"alarmId"],[121,74,85,34],[121,79,85,39,"alarmId"],[121,86,86,4],[121,87,86,5],[122,6,88,4],[122,11,88,9],[122,17,88,15,"notification"],[122,29,88,27],[122,33,88,31,"alarmsToCancel"],[122,47,88,45],[122,49,88,47],[123,8,89,6],[123,14,89,12,"Notifications"],[123,27,89,25],[123,28,89,26,"cancelScheduledNotificationAsync"],[123,60,89,58],[123,61,89,59,"notification"],[123,73,89,71],[123,74,89,72,"identifier"],[123,84,89,82],[123,85,89,83],[124,6,90,4],[125,4,91,2],[125,5,91,3],[125,6,91,4],[125,13,91,11,"error"],[125,18,91,16],[125,20,91,18],[126,6,92,4,"console"],[126,13,92,11],[126,14,92,12,"error"],[126,19,92,17],[126,20,92,18],[126,57,92,55],[126,59,92,57,"error"],[126,64,92,62],[126,65,92,63],[127,4,93,2],[128,2,94,0],[128,3,94,1],[129,2,96,7],[129,8,96,13,"cancelAllAlarmNotifications"],[129,35,96,40],[129,38,96,43],[129,44,96,43,"cancelAllAlarmNotifications"],[129,45,96,43],[129,50,96,70],[130,4,97,2],[130,8,97,6],[131,6,98,4],[131,12,98,10,"Notifications"],[131,25,98,23],[131,26,98,24,"cancelAllScheduledNotificationsAsync"],[131,62,98,60],[131,63,98,61],[131,64,98,62],[132,4,99,2],[132,5,99,3],[132,6,99,4],[132,13,99,11,"error"],[132,18,99,16],[132,20,99,18],[133,6,100,4,"console"],[133,13,100,11],[133,14,100,12,"error"],[133,19,100,17],[133,20,100,18],[133,56,100,54],[133,58,100,56,"error"],[133,63,100,61],[133,64,100,62],[134,4,101,2],[135,2,102,0],[135,3,102,1],[136,0,102,2],[136,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","requestNotificationPermissions","scheduleAlarmNotification","cancelAlarmNotification","scheduled.filter$argument_0","cancelAllAlarmNotifications"],"mappings":"AAA;wBCO;MDI;8CEM;CFe;yCGE;CH4C;uCIE;MCI,wCD;CJS;2CME;CNM"},"hasCjsExports":false},"type":"js/module"}]}
{"dependencies":[{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"requestNotificationPermissions\", {\n    enumerable: true,\n    get: function () {\n      return requestNotificationPermissions;\n    }\n  });\n  Object.defineProperty(exports, \"scheduleAlarmNotification\", {\n    enumerable: true,\n    get: function () {\n      return scheduleAlarmNotification;\n    }\n  });\n  Object.defineProperty(exports, \"cancelAlarmNotification\", {\n    enumerable: true,\n    get: function () {\n      return cancelAlarmNotification;\n    }\n  });\n  Object.defineProperty(exports, \"cancelAllAlarmNotifications\", {\n    enumerable: true,\n    get: function () {\n      return cancelAllAlarmNotifications;\n    }\n  });\n  var _expoNotifications = require(_dependencyMap[0], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  // Configure notification handler\n  Notifications.setNotificationHandler({\n    handleNotification: async () => ({\n      shouldShowAlert: true,\n      shouldPlaySound: true,\n      shouldSetBadge: false\n    })\n  });\n  const requestNotificationPermissions = async () => {\n    try {\n      const {\n        status: existingStatus\n      } = await Notifications.getPermissionsAsync();\n      let finalStatus = existingStatus;\n      if (existingStatus !== 'granted') {\n        const {\n          status\n        } = await Notifications.requestPermissionsAsync();\n        finalStatus = status;\n      }\n      return finalStatus === 'granted';\n    } catch (error) {\n      console.error('Error requesting notification permissions:', error);\n      return false;\n    }\n  };\n  const scheduleAlarmNotification = async alarm => {\n    try {\n      // Cancel existing notifications for this alarm\n      await cancelAlarmNotification(alarm.id);\n      if (!alarm.enabled) {\n        return null;\n      }\n      const [hours, minutes] = alarm.time.split(':').map(Number);\n      const now = new Date();\n      const scheduledTime = new Date();\n      scheduledTime.setHours(hours, minutes, 0, 0);\n\n      // If the time has passed today, schedule for tomorrow\n      if (scheduledTime <= now) {\n        scheduledTime.setDate(scheduledTime.getDate() + 1);\n      }\n      const trigger = {\n        hour: hours,\n        minute: minutes,\n        repeats: alarm.repeatDays.length > 0\n      };\n      const notificationId = await Notifications.scheduleNotificationAsync({\n        content: {\n          title: alarm.name || 'Nuveen Alarm',\n          body: 'Scan your NFC tag to stop the alarm',\n          sound: 'default',\n          priority: Notifications.AndroidNotificationPriority.MAX,\n          data: {\n            alarmId: alarm.id,\n            requiresNFC: alarm.nfcRequired\n          }\n        },\n        trigger: trigger\n      });\n      return notificationId;\n    } catch (error) {\n      console.error('Error scheduling alarm notification:', error);\n      return null;\n    }\n  };\n  const cancelAlarmNotification = async alarmId => {\n    try {\n      const scheduled = await Notifications.getAllScheduledNotificationsAsync();\n      const alarmsToCancel = scheduled.filter(n => n.content.data?.alarmId === alarmId);\n      for (const notification of alarmsToCancel) {\n        await Notifications.cancelScheduledNotificationAsync(notification.identifier);\n      }\n    } catch (error) {\n      console.error('Error canceling alarm notification:', error);\n    }\n  };\n  const cancelAllAlarmNotifications = async () => {\n    try {\n      await Notifications.cancelAllScheduledNotificationsAsync();\n    } catch (error) {\n      console.error('Error canceling all notifications:', error);\n    }\n  };\n});","lineCount":132,"map":[[22,2,14,0,"Object"],[22,8,14,0],[22,9,14,0,"defineProperty"],[22,23,14,0],[22,24,14,0,"exports"],[22,31,14,0],[23,4,14,0,"enumerable"],[23,14,14,0],[24,4,14,0,"get"],[24,7,14,0],[24,18,14,0,"get"],[24,19,14,0],[25,6,14,0],[25,13,14,0,"requestNotificationPermissions"],[25,43,14,0],[26,4,14,0],[27,2,14,0],[28,2,31,0,"Object"],[28,8,31,0],[28,9,31,0,"defineProperty"],[28,23,31,0],[28,24,31,0,"exports"],[28,31,31,0],[29,4,31,0,"enumerable"],[29,14,31,0],[30,4,31,0,"get"],[30,7,31,0],[30,18,31,0,"get"],[30,19,31,0],[31,6,31,0],[31,13,31,0,"scheduleAlarmNotification"],[31,38,31,0],[32,4,31,0],[33,2,31,0],[34,2,77,0,"Object"],[34,8,77,0],[34,9,77,0,"defineProperty"],[34,23,77,0],[34,24,77,0,"exports"],[34,31,77,0],[35,4,77,0,"enumerable"],[35,14,77,0],[36,4,77,0,"get"],[36,7,77,0],[36,18,77,0,"get"],[36,19,77,0],[37,6,77,0],[37,13,77,0,"cancelAlarmNotification"],[37,36,77,0],[38,4,77,0],[39,2,77,0],[40,2,92,0,"Object"],[40,8,92,0],[40,9,92,0,"defineProperty"],[40,23,92,0],[40,24,92,0,"exports"],[40,31,92,0],[41,4,92,0,"enumerable"],[41,14,92,0],[42,4,92,0,"get"],[42,7,92,0],[42,18,92,0,"get"],[42,19,92,0],[43,6,92,0],[43,13,92,0,"cancelAllAlarmNotifications"],[43,40,92,0],[44,4,92,0],[45,2,92,0],[46,2,1,0],[46,6,1,0,"_expoNotifications"],[46,24,1,0],[46,27,1,0,"require"],[46,34,1,0],[46,35,1,0,"_dependencyMap"],[46,49,1,0],[47,2,1,0],[47,6,1,0,"Notifications"],[47,19,1,0],[47,22,1,0,"_interopNamespace"],[47,39,1,0],[47,40,1,0,"_expoNotifications"],[47,58,1,0],[48,2,5,0],[49,2,6,0,"Notifications"],[49,15,6,13],[49,16,6,14,"setNotificationHandler"],[49,38,6,36],[49,39,6,37],[50,4,7,2,"handleNotification"],[50,22,7,20],[50,24,7,22],[50,30,7,22,"handleNotification"],[50,31,7,22],[50,37,7,35],[51,6,8,4,"shouldShowAlert"],[51,21,8,19],[51,23,8,21],[51,27,8,25],[52,6,9,4,"shouldPlaySound"],[52,21,9,19],[52,23,9,21],[52,27,9,25],[53,6,10,4,"shouldSetBadge"],[53,20,10,18],[53,22,10,20],[54,4,11,2],[54,5,11,3],[55,2,12,0],[55,3,12,1],[55,4,12,2],[56,2,14,7],[56,8,14,13,"requestNotificationPermissions"],[56,38,14,43],[56,41,14,46],[56,47,14,46,"requestNotificationPermissions"],[56,48,14,46],[56,53,14,76],[57,4,15,2],[57,8,15,6],[58,6,16,4],[58,12,16,10],[59,8,16,12,"status"],[59,14,16,18],[59,16,16,20,"existingStatus"],[60,6,16,35],[60,7,16,36],[60,10,16,39],[60,16,16,45,"Notifications"],[60,29,16,58],[60,30,16,59,"getPermissionsAsync"],[60,49,16,78],[60,50,16,79],[60,51,16,80],[61,6,17,4],[61,10,17,8,"finalStatus"],[61,21,17,19],[61,24,17,22,"existingStatus"],[61,38,17,36],[62,6,19,4],[62,10,19,8,"existingStatus"],[62,24,19,22],[62,29,19,27],[62,38,19,36],[62,40,19,38],[63,8,20,6],[63,14,20,12],[64,10,20,14,"status"],[65,8,20,21],[65,9,20,22],[65,12,20,25],[65,18,20,31,"Notifications"],[65,31,20,44],[65,32,20,45,"requestPermissionsAsync"],[65,55,20,68],[65,56,20,69],[65,57,20,70],[66,8,21,6,"finalStatus"],[66,19,21,17],[66,22,21,20,"status"],[66,28,21,26],[67,6,22,4],[68,6,24,4],[68,13,24,11,"finalStatus"],[68,24,24,22],[68,29,24,27],[68,38,24,36],[69,4,25,2],[69,5,25,3],[69,6,25,4],[69,13,25,11,"error"],[69,18,25,16],[69,20,25,18],[70,6,26,4,"console"],[70,13,26,11],[70,14,26,12,"error"],[70,19,26,17],[70,20,26,18],[70,64,26,62],[70,66,26,64,"error"],[70,71,26,69],[70,72,26,70],[71,6,27,4],[71,13,27,11],[71,18,27,16],[72,4,28,2],[73,2,29,0],[73,3,29,1],[74,2,31,7],[74,8,31,13,"scheduleAlarmNotification"],[74,33,31,38],[74,36,31,41],[74,42,31,48,"alarm"],[74,47,31,60],[74,51,31,89],[75,4,32,2],[75,8,32,6],[76,6,33,4],[77,6,34,4],[77,12,34,10,"cancelAlarmNotification"],[77,35,34,33],[77,36,34,34,"alarm"],[77,41,34,39],[77,42,34,40,"id"],[77,44,34,42],[77,45,34,43],[78,6,36,4],[78,10,36,8],[78,11,36,9,"alarm"],[78,16,36,14],[78,17,36,15,"enabled"],[78,24,36,22],[78,26,36,24],[79,8,37,6],[79,15,37,13],[79,19,37,17],[80,6,38,4],[81,6,40,4],[81,12,40,10],[81,13,40,11,"hours"],[81,18,40,16],[81,20,40,18,"minutes"],[81,27,40,25],[81,28,40,26],[81,31,40,29,"alarm"],[81,36,40,34],[81,37,40,35,"time"],[81,41,40,39],[81,42,40,40,"split"],[81,47,40,45],[81,48,40,46],[81,51,40,49],[81,52,40,50],[81,53,40,51,"map"],[81,56,40,54],[81,57,40,55,"Number"],[81,63,40,61],[81,64,40,62],[82,6,41,4],[82,12,41,10,"now"],[82,15,41,13],[82,18,41,16],[82,22,41,20,"Date"],[82,26,41,24],[82,27,41,25],[82,28,41,26],[83,6,42,4],[83,12,42,10,"scheduledTime"],[83,25,42,23],[83,28,42,26],[83,32,42,30,"Date"],[83,36,42,34],[83,37,42,35],[83,38,42,36],[84,6,43,4,"scheduledTime"],[84,19,43,17],[84,20,43,18,"setHours"],[84,28,43,26],[84,29,43,27,"hours"],[84,34,43,32],[84,36,43,34,"minutes"],[84,43,43,41],[84,45,43,43],[84,46,43,44],[84,48,43,46],[84,49,43,47],[84,50,43,48],[86,6,45,4],[87,6,46,4],[87,10,46,8,"scheduledTime"],[87,23,46,21],[87,27,46,25,"now"],[87,30,46,28],[87,32,46,30],[88,8,47,6,"scheduledTime"],[88,21,47,19],[88,22,47,20,"setDate"],[88,29,47,27],[88,30,47,28,"scheduledTime"],[88,43,47,41],[88,44,47,42,"getDate"],[88,51,47,49],[88,52,47,50],[88,53,47,51],[88,56,47,54],[88,57,47,55],[88,58,47,56],[89,6,48,4],[90,6,50,4],[90,12,50,10,"trigger"],[90,19,50,17],[90,22,50,20],[91,8,51,6,"hour"],[91,12,51,10],[91,14,51,12,"hours"],[91,19,51,17],[92,8,52,6,"minute"],[92,14,52,12],[92,16,52,14,"minutes"],[92,23,52,21],[93,8,53,6,"repeats"],[93,15,53,13],[93,17,53,15,"alarm"],[93,22,53,20],[93,23,53,21,"repeatDays"],[93,33,53,31],[93,34,53,32,"length"],[93,40,53,38],[93,43,53,41],[94,6,54,4],[94,7,54,5],[95,6,56,4],[95,12,56,10,"notificationId"],[95,26,56,24],[95,29,56,27],[95,35,56,33,"Notifications"],[95,48,56,46],[95,49,56,47,"scheduleNotificationAsync"],[95,74,56,72],[95,75,56,73],[96,8,57,6,"content"],[96,15,57,13],[96,17,57,15],[97,10,58,8,"title"],[97,15,58,13],[97,17,58,15,"alarm"],[97,22,58,20],[97,23,58,21,"name"],[97,27,58,25],[97,31,58,29],[97,45,58,43],[98,10,59,8,"body"],[98,14,59,12],[98,16,59,14],[98,53,59,51],[99,10,60,8,"sound"],[99,15,60,13],[99,17,60,15],[99,26,60,24],[100,10,61,8,"priority"],[100,18,61,16],[100,20,61,18,"Notifications"],[100,33,61,31],[100,34,61,32,"AndroidNotificationPriority"],[100,61,61,59],[100,62,61,60,"MAX"],[100,65,61,63],[101,10,62,8,"data"],[101,14,62,12],[101,16,62,14],[102,12,63,10,"alarmId"],[102,19,63,17],[102,21,63,19,"alarm"],[102,26,63,24],[102,27,63,25,"id"],[102,29,63,27],[103,12,64,10,"requiresNFC"],[103,23,64,21],[103,25,64,23,"alarm"],[103,30,64,28],[103,31,64,29,"nfcRequired"],[104,10,65,8],[105,8,66,6],[105,9,66,7],[106,8,67,6,"trigger"],[106,15,67,13],[106,17,67,15,"trigger"],[107,6,68,4],[107,7,68,5],[107,8,68,6],[108,6,70,4],[108,13,70,11,"notificationId"],[108,27,70,25],[109,4,71,2],[109,5,71,3],[109,6,71,4],[109,13,71,11,"error"],[109,18,71,16],[109,20,71,18],[110,6,72,4,"console"],[110,13,72,11],[110,14,72,12,"error"],[110,19,72,17],[110,20,72,18],[110,58,72,56],[110,60,72,58,"error"],[110,65,72,63],[110,66,72,64],[111,6,73,4],[111,13,73,11],[111,17,73,15],[112,4,74,2],[113,2,75,0],[113,3,75,1],[114,2,77,7],[114,8,77,13,"cancelAlarmNotification"],[114,31,77,36],[114,34,77,39],[114,40,77,46,"alarmId"],[114,47,77,61],[114,51,77,81],[115,4,78,2],[115,8,78,6],[116,6,79,4],[116,12,79,10,"scheduled"],[116,21,79,19],[116,24,79,22],[116,30,79,28,"Notifications"],[116,43,79,41],[116,44,79,42,"getAllScheduledNotificationsAsync"],[116,77,79,75],[116,78,79,76],[116,79,79,77],[117,6,80,4],[117,12,80,10,"alarmsToCancel"],[117,26,80,24],[117,29,80,27,"scheduled"],[117,38,80,36],[117,39,80,37,"filter"],[117,45,80,43],[117,46,81,6,"n"],[117,47,81,7],[117,51,81,11,"n"],[117,52,81,12],[117,53,81,13,"content"],[117,60,81,20],[117,61,81,21,"data"],[117,65,81,25],[117,67,81,27,"alarmId"],[117,74,81,34],[117,79,81,39,"alarmId"],[117,86,82,4],[117,87,82,5],[118,6,84,4],[118,11,84,9],[118,17,84,15,"notification"],[118,29,84,27],[118,33,84,31,"alarmsToCancel"],[118,47,84,45],[118,49,84,47],[119,8,85,6],[119,14,85,12,"Notifications"],[119,27,85,25],[119,28,85,26,"cancelScheduledNotificationAsync"],[119,60,85,58],[119,61,85,59,"notification"],[119,73,85,71],[119,74,85,72,"identifier"],[119,84,85,82],[119,85,85,83],[120,6,86,4],[121,4,87,2],[121,5,87,3],[121,6,87,4],[121,13,87,11,"error"],[121,18,87,16],[121,20,87,18],[122,6,88,4,"console"],[122,13,88,11],[122,14,88,12,"error"],[122,19,88,17],[122,20,88,18],[122,57,88,55],[122,59,88,57,"error"],[122,64,88,62],[122,65,88,63],[123,4,89,2],[124,2,90,0],[124,3,90,1],[125,2,92,7],[125,8,92,13,"cancelAllAlarmNotifications"],[125,35,92,40],[125,38,92,43],[125,44,92,43,"cancelAllAlarmNotifications"],[125,45,92,43],[125,50,92,70],[126,4,93,2],[126,8,93,6],[127,6,94,4],[127,12,94,10,"Notifications"],[127,25,94,23],[127,26,94,24,"cancelAllScheduledNotificationsAsync"],[127,62,94,60],[127,63,94,61],[127,64,94,62],[128,4,95,2],[128,5,95,3],[128,6,95,4],[128,13,95,11,"error"],[128,18,95,16],[128,20,95,18],[129,6,96,4,"console"],[129,13,96,11],[129,14,96,12,"error"],[129,19,96,17],[129,20,96,18],[129,56,96,54],[129,58,96,56,"error"],[129,63,96,61],[129,64,96,62],[130,4,97,2],[131,2,98,0],[131,3,98,1],[132,0,98,2],[132,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","requestNotificationPermissions","scheduleAlarmNotification","cancelAlarmNotification","scheduled.filter$argument_0","cancelAllAlarmNotifications"],"mappings":"AAA;sBCM;IDI;8CEG;CFe;yCGE;CH4C;uCIE;MCI,wCD;CJS;2CME;CNM"},"hasCjsExports":false},"type":"js/module"}]}